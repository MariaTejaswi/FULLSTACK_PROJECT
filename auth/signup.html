<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Signup Page</title>
    <link href="/FULLSTACK_PROJECT/src/output.css" rel="stylesheet"> <!-- Ensure this is correctly compiled using Tailwind CLI -->
</head>
<body class="px-6 pb-4">
    <div class="inset-0 bg-[url('../images/login.png')] bg-cover bg-center opacity-75 fixed"></div>

    <!-- Navigation Bar -->
    <nav class="w-full bg-gradient-to-r from-gray-400 to-[#6daab9] h-20 flex justify-between items-center px-6 md:px-20 border-b-2 shadow-md fixed top-0 left-0 right-0 z-10">
        <div class="flex items-center gap-3">
            <img src="../images/logo.svg" alt="logo" class="">
        </div>
        <div class="flex gap-4 md:gap-6 justify-center mt-2">
            <a href="/FULLSTACK_PROJECT/auth/login.html">
                <button class="bg-white hover:bg-gray-400 hover:text-white text-[#3B8A9C] font-serif border-2 rounded-2xl h-10 px-4 md:h-12 md:px-5 hover:cursor-pointer">
                    Log In
                </button>
            </a>
            <a href="/FULLSTACK_PROJECT/homepage/homepage1.php">
                <button class="bg-white hover:bg-gray-400 hover:text-white text-[#3B8A9C] font-serif border-2 rounded-2xl h-10 px-4 md:h-12 md:px-5 hover:cursor-pointer">
                    Home
                </button>
            </a>
        </div>
    </nav>

    <div class="w-full max-w-md mx-auto relative mt-30 md:mt-60">
        <div class="absolute w-[200%] h-[120%] left-[-50%] top-[-10%] bg-gray-300/50 backdrop-blur-lg rounded-xl shadow-xl z-0"></div>

        <!-- Signup Form -->
        <div class="max-w-sm md:max-w-md mx-auto bg-white/70 backdrop-blur-md rounded-2xl mt-28 p-6 md:p-10 shadow-lg z-10">
            <h1 class="text-center text-3xl md:text-4xl font-bold font-serif">Sign Up</h1>
            <h2 class="text-center font-serif pb-6 text-sm md:text-base">
                Already have an account? 
                <a href="/FULLSTACK_PROJECT/auth/login.html" class="underline font-semibold">Login</a>
            </h2>

            <form action="/FULLSTACK_PROJECT/auth/signup.php" method="POST" id="signupForm" onsubmit="return validateSignup(event)">
                <div class="mb-4">
                    <label for="fullname" class="font-medium text-gray-700">Full Name</label>
                    <input type="text" id="fullname" name="fullname" required
                        class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <div id="fullnameError" class="text-red-500 text-sm hidden">Please enter your full name.</div>
                </div>

                <div class="mb-4 flex flex-col md:flex-row gap-4">
                    <div class="w-full md:w-1/2">
                        <label for="gender" class="font-medium text-gray-700">Gender</label>
                        <select id="gender" name="gender" class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                            <option value="select">Select</option>
                            <option value="male">Male</option>
                            <option value="female">Female</option>
                            <option value="other">Other</option>
                            <option value="na">Prefer not to say</option>
                        </select>
                        <div id="genderError" class="text-red-500 text-sm hidden">Please select a gender.</div>
                    </div>
                    <div class="w-full md:w-1/2">
                        <label for="age" class="font-medium text-gray-700">Age</label>
                        <input type="number" min="13" max="80" id="age" name="age" required
                            class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                        <div id="ageError" class="text-red-500 text-sm hidden">Age must be between 13 and 80.</div>
                    </div>
                </div>

                <div class="mb-4">
                    <label for="email" class="font-medium text-gray-700">Email</label>
                    <input type="email" id="email" name="email" required
                        class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <div id="emailError" class="text-red-500 text-sm hidden">Please enter a valid email (e.g., user@example.com).</div>
                </div>

                <div class="mb-4">
                    <label for="password" class="font-medium text-gray-700">Password</label>
                    <input type="password" id="password" name="password" required
                        class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <div id="passwordError" class="text-red-500 text-sm hidden">Password must be at least 6 characters.</div>
                </div>

                <div class="mb-4">
                    <label for="confirm_password" class="font-medium text-gray-700">Confirm Password</label>
                    <input type="password" id="confirm_password" name="confirm_password" required
                        class="mt-1 w-full px-4 py-2 border rounded-lg focus:ring focus:ring-blue-200">
                    <div id="confirmPasswordError" class="text-red-500 text-sm hidden">Passwords do not match.</div>
                </div>

                <div class="flex items-center mb-4">
                    <input type="checkbox" id="terms" name="terms" required 
                           class="mr-2 h-5 w-5">
                    <label for="terms" class="text-sm">
                        I agree to the 
                        <a href="/FULLSTACK_PROJECT/auth/terms-and-privacy.html" class="underline font-semibold">Terms & Conditions</a> and 
                        <a href="/FULLSTACK_PROJECT/auth/terms-and-privacy.html" class="underline font-semibold">Privacy Policy</a>.
                    </label>
                    <div id="termsError" class="text-red-500 text-sm hidden ml-2">Please agree to the terms.</div>
                </div>

                <button type="submit"
                    class="w-full mt-5 bg-[#3B8A9C] text-white py-2 rounded-lg hover:bg-[#589ca0eb] transition hover:cursor-pointer">
                    Sign Up
                </button>
            </form>
        </div>
    </div>

    <script>
        function validateSignup(event) {
            event.preventDefault();
            let isValid = true;

            // Reset error messages
            document.querySelectorAll('.text-red-500').forEach(error => error.classList.add('hidden'));

            // Validate full name
            const fullname = document.getElementById('fullname').value.trim();
            if (!fullname) {
                document.getElementById('fullnameError').classList.remove('hidden');
                isValid = false;
            }

            // Validate gender
            const gender = document.getElementById('gender').value;
            if (gender === "select") {
                document.getElementById('genderError').classList.remove('hidden');
                isValid = false;
            }

            // Validate age
            const age = document.getElementById('age').value;
            if (!age || age < 13 || age > 80) {
                document.getElementById('ageError').classList.remove('hidden');
                isValid = false;
            }

            // Validate email
            const email = document.getElementById('email').value.trim();
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailPattern.test(email)) {
                document.getElementById('emailError').classList.remove('hidden');
                isValid = false;
            }

            // Validate password
            const password = document.getElementById('password').value.trim();
            if (password.length < 6) {
                document.getElementById('passwordError').classList.remove('hidden');
                isValid = false;
            }

            // Validate confirm password
            const confirmPassword = document.getElementById('confirm_password').value.trim();
            if (confirmPassword !== password) {
                document.getElementById('confirmPasswordError').classList.remove('hidden');
                isValid = false;
            }

            // Validate terms
            const terms = document.getElementById('terms').checked;
            if (!terms) {
                document.getElementById('termsError').classList.remove('hidden');
                isValid = false;
            }

            if (isValid) {
                document.getElementById('signupForm').submit();
            }
            return isValid;
        }

        // Apply theme on load
        document.addEventListener('DOMContentLoaded', () => {
            if (localStorage.getItem('theme') === 'dark') {
                document.body.classList.add('dark-mode');
            }
        });

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const currentTheme = document.body.classList.contains('dark-mode') ? 'dark' : 'light';
            localStorage.setItem('theme', currentTheme);
        }
    </script>
</body>
</html>